version: '3.8'

x-env-file: &services-env-file
  env_file:
    - ./.env

services:
  fastapi:
    build: ../../.
    image: fastapi-image

  tests:
    image: fastapi-image
    <<: *services-env-file
    networks:
      - backend

volumes:
  postgres_data:
  es_data:

networks:
  backend:
    name: backend
    driver: bridge
